<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Arrow Function</title>
    </head>
    <body>
        <script>
            // 화상표 함수(Arrow Function): java언어의 람다식표기법
            // 1. 일반적인 함수[선언적 함수]
            function show(){
                document.write('show<br>');
            }
            show();

            // 2. 익명함수
            let output = function(){
                document.write('output<br>');
            }
            output();

            // 3. 이 '익명함수'를 화살표함수로 변경하여 사용할 수 있음
            let display = ()=>{     //Java: ->, JavaScript: =>
                document.write('display<br>');
            }
            display();

            let display2 = (name)=>{
                document.write(name+"<br>");
            }
            display2('sam');

            // 화살표함수 표기문법을 더 간결하게 줄여서 사용
            // 1) 파라미터가 1개일때는 ()를 생략가능(없거나 2개이상이면 생략불가)
            let display3 = name=>{
                document.write(name+"<br>");
            }
            display3('robin');
            
            // 2) {}안에 실행문이 1줄일때는 {}도 생략가능
            let display4 = name => document.write(name+"<br>");
            display4('kim');
            //파라미터 없을때
            let display5 = () => document.write("display<br>");   
            display5();
            //파라미터 2개일때
            let display6 = (name, age) => document.write(name+", "+age+"<br>");
            display6('hong', 20);

            document.write("<br>");
        </script>

        <!-- 화살표 함수는 보통 이벤트 처리목적(리스너)으로 많이 사용됨 -->
        <button id="btn1">button</button>
        <button id="btn2">button2</button>
        <p id="p1"></p>
        <script>
            // 1. 버턴 클릭이벤트 달기
            // 1) 예전 방식
            let btn1 = document.getElementById('btn1');
            btn1.onclick = function(){
                document.getElementById('p1').innerHTML = "clicked button";
            }
            // 2) 화살표함수로
            let btn2 = document.getElementById('btn2');
            btn2.onclick = ()=>document.getElementById('p1').innerHTML = "clicked button2";

            // 2. 반복문 처리에 특별하게 사용가능함
            let arr = new Array(10, 20, 30);
            // css선택자 문법으로 요소 찾아오는 메소드 연습 - querySelector
            document.querySelector('#p1').innerHTML = arr[0]+"<br>";

            // 반복문으로 배열요소값들 출력
            for(let i=0; i<arr.length; i++){
                document.querySelector('#p1').innerHTML += arr[i]+"<br>";
            }
            // for-in 문법 (차례로 index번호 얻어오기)
            for(index in arr){
                document.querySelector('#p1').innerHTML += arr[index]+"<br>";
            }
            document.write('<hr>');
            // 배열객체의 forEach()메소드 이용
            arr.forEach(function(value){        //배열의 길이만큼 함수 실행
                document.write(value+"<br>");
            });
            document.write('<hr>');
            // 이때 사용된 콜백함수를 화살표함수로 만들기
            arr.forEach( (value)=>{document.write(value+"<br>");} );
            //괄호 생략
            arr.forEach( value=>document.write(value+"<br>") );

            // forEach()와 비슷한 map()메소드 
            // 요소의 개수만큼 반복하며 ()안의 파라미터로 전달된 함수를 호출해주는 방식은 forEach()와 같지만 
            // 각 콜백함수는 return을 가지고 있음
            // 결국, map()는 각 요소개수마다 return하고 그 결과를 새로운 배열로 리턴함
            let arr2 = arr.map( function(value){return value+1;} );
            document.write(arr2+"<br>");    //배열 출력하면 자동 요소1, 요소2, 요소3,...
            document.write('<hr>');

            // 위 map()을 화살표함수로 변경
            // 만약 실행문이 1줄일 때 {}도 생략할 수 있으나 return이 있으면 생략 안되므로 return도 같이 생략해야 한다
            let arr3 = arr.map( value=>value+1 );
            document.write(arr3+"<br>");

            // 나중에 하이브리드 앱 개발에 더 많은 내용을 다뤄볼것임
            document.write("<hr>");

            arr.forEach(value=>value+1);
            document.write(arr+"<br>"); //원본은 바뀌지 않음
            arr.forEach(value=>value=5);
            document.write(arr+"<br>"); //원본은 바뀌지 않음
        </script>

        <hr>
        <button id="btn3">button3</button>
        <button id="btn4">button4</button>
        <p id="p2"></p>
        <script>
            // 콜백함수를 익명할수로 했을때
            btn3.onclick = function(){
                document.querySelector('#p2').innerHTML = this; //this: btn3
            }
            // 콜백함수를 화살표함수로 했을때
            btn4.onclick = ()=>{
                document.querySelector('#p2').innerHTML = this; //this: Window객체 - 함수의 상위요소(클래스 안에 함수가 있으면 this는 클래스를 가리킴)
            }
        </script>
    </body>
</html>